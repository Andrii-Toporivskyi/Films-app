(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){},110:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),o=a.n(s),i=a(5),c=a(6),l=a(8),u=a(7),p=a(9),m=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sort_by,a=e.onChangeFilters,n=e.options;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"sort_by"},"\u0421\u043e\u0440\u0442\u0443\u0432\u0430\u0442\u0438 \u043f\u043e:"),r.a.createElement("select",{id:"sort_by",className:"form-control",name:"sort_by",value:t,onChange:a},n.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))}}]),t}(r.a.Component);m.defaultProps={options:[{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u0456 \u043f\u043e \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u0456",value:"popularity.desc",image:"/lol.jpg"},{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u0456 \u043f\u043e \u0437\u0440\u043e\u0441\u0442\u0430\u043d\u043d\u0456",value:"popularity.asc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0441\u043f\u0430\u0434\u0430\u043d\u043d\u0456",value:"vote_average.desc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0437\u0440\u043e\u0441\u0442\u0430\u043d\u043d\u0456",value:"vote_average.asc"}]};var h=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.name,n=e.value,s=e.onChange,o=e.labelText,i=e.children;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t},o),";",r.a.createElement("select",{id:t,className:"form-control",name:a,value:n,onChange:s},i))}}]),t}(r.a.Component),g=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.primary_release_year,a=e.onChangeFilters,n=e.options;return r.a.createElement(h,{id:"primary_release_year",name:"primary_release_year",value:t,onChange:a,labelText:"\u0420\u0456\u043a \u0440\u0435\u0430\u043b\u0456\u0437\u0443:"},n.map(function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))}}]),t}(r.a.PureComponent);g.defaultProps={options:[{label:"2021",value:"2021"},{label:"2020",value:"2020"},{label:"2019",value:"2019"},{label:"2018",value:"2018"},{label:"2017",value:"2017"},{label:"2016",value:"2016"},{label:"2015",value:"2015"}]};var d=a(12),b=a.n(d),v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).nextPage=function(){a.props.onChangePagination({page:a.props.page+1,total_pages:a.props.total_pages})},a.prevPage=function(e){return function(e){a.props.onChangePagination({page:a.props.page-1,total_pages:a.props.total_pages})}},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.page,a=e.total_pages;return r.a.createElement("nav",{className:"d-flex align-items-center"},r.a.createElement("ul",{className:"pagination mb-0 mr-3"},r.a.createElement("li",{className:b()("page-item",{disabled:1===t})},r.a.createElement("span",{className:"page-link",onClick:this.prevPage(t)},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement("li",{className:"page-item"},r.a.createElement("span",{className:"page-link",onClick:this.nextPage},"\u0412\u043f\u0435\u0440\u0435\u0434"))),r.a.createElement("span",null,t," of ",a))}}]),t}(r.a.Component),f=a(61),O=a(18),j=a(36),y=a.n(j),E="https://api.themoviedb.org/3",_="7948b777e34e4a39f237535444ae8eef",k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(a,n){fetch(e,t).then(function(e){if(e.status<400)return e.json();throw e}).then(function(e){a(e)}).catch(function(e){e.json().then(function(e){n(e)})})})},C=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"get",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).params,a=void 0===t?{}:t,n=Object(O.a)({api_key:_},a);return k("".concat(E).concat(e,"?").concat(y.a.stringify(n)),{mode:"cors",headers:{"Content-type":"application/json"}})}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=t.body,s=void 0===r?{}:r,o=Object(O.a)({api_key:_},n);return k("".concat(E).concat(e,"?").concat(y.a.stringify(o)),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(s)})}}]),e}(),w=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.props.onChangeFilters({target:{name:"with_genres",value:t.target.checked?[].concat(Object(f.a)(e.props.with_genres),[t.target.value]):e.props.with_genres.filter(function(e){return e!==t.target.value})}})},e.resetGenres=function(){e.props.onChangeFilters({target:{name:"with_genres",value:[]}})},e.state={genresList:[]},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="".concat(E,"/genre/movie/list?api_key=").concat(_,"&language=uk-UK");fetch(t).then(function(e){return e.json()}).then(function(t){e.setState({genresList:t.genres})})}},{key:"render",value:function(){var e=this,t=this.state.genresList,a=this.props.with_genres;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mb-2"},"\u0416\u0430\u043d\u0440\u0438:"),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-outline-dark mb-1",onClick:this.resetGenres},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0432\u0441\u0456 \u0436\u0430\u043d\u0440\u0438")),t.map(function(t){return r.a.createElement("div",{key:t.id,className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:t.id,id:"genre".concat(t.id),onChange:e.onChange,checked:a.includes(String(t.id))}),r.a.createElement("label",{className:"form-check-label",htmlFor:"genre".concat(t.id)},t.name))}))}}]),t}(r.a.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.filters,a=t.sort_by,n=t.primary_release_year,s=t.with_genres,o=e.page,i=e.total_pages,c=e.onChangeFilters,l=e.onChangePagination;return r.a.createElement("form",{className:"mb-3"},r.a.createElement(m,{sort_by:a,onChangeFilters:c}),r.a.createElement(g,{primary_release_year:n,onChangeFilters:c}),r.a.createElement("div",{className:"mb-3"},r.a.createElement(w,{with_genres:s,onChangeFilters:c})),r.a.createElement(v,{page:o,total_pages:i,onChangePagination:l}))}}]),t}(r.a.Component),S=a(30),F=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.item;return r.a.createElement("div",{className:"card",style:{width:"100%"}},r.a.createElement("img",{className:"card-img-top card-img--height",src:"https://image.tmdb.org/t/p/w500".concat(e.backdrop_path||e.poster_path),alt:""}),r.a.createElement("div",{className:"card-body"},r.a.createElement(S.b,{className:"card-title",to:"/movie/".concat(e.id)},e.title),r.a.createElement("div",{className:"card-text"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",e.vote_average)))}}]),t}(r.a.Component),P=a(58),M=a.n(P),x=function(e){var t=e.movies;return r.a.createElement("div",{className:"row"},t.map(function(e){return r.a.createElement("div",{key:e.id,className:"col-6 mb-4"},r.a.createElement(F,{item:e}))}))};x.defaultProps={movies:[]};var L,D=(L=x,function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).getMovies=function(t,a){var n=t.sort_by,r=t.primary_release_year,s=t.with_genres,o={language:"uk-UK",sort_by:n,page:a,primary_release_year:r};s.length>0&&(o.with_genres=s.join(",")),C.get("/discover/movie",{params:o}).then(function(t){e.props.onChangePagination({page:t.page,total_pages:t.total_pages}),e.setState({movies:t.results})})},e.state={movies:[]},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getMovies(this.props.filters,this.props.page)}},{key:"componentDidUpdate",value:function(e){M.a.isEqual(this.props.filters,e.filters)||(this.props.onChangePagination({page:1}),this.getMovies(this.props.filters,1)),this.props.page!==e.page&&this.getMovies(this.props.filters,this.props.page)}},{key:"render",value:function(){return r.a.createElement(L,{movies:this.state.movies})}}]),t}(r.a.Component)),I=a(114),U=a(111),q=a(22),A=function(e){return function(t){function a(){return Object(i.a)(this,a),Object(l.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(p.a)(a,t),Object(c.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(Z.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t.props,a))})}}]),a}(r.a.Component)},B=A(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",errors:{},submitting:!1},a.onChange=function(e){var t=e.target.name,n=e.target.value;a.setState(function(e){var a;return a={},Object(q.a)(a,t,n),Object(q.a)(a,"errors",Object(O.a)({},e.errors,Object(q.a)({base:null},t,null))),a})},a.handleBlur=function(){var e=a.validateFields();Object.keys(e).length>0&&a.setState(function(t){return{errors:Object(O.a)({},t.errors,e)}})},a.validateFields=function(){var e={};return""===a.state.username&&(e.username="Not empty"),e},a.onSubmit=function(){a.setState({submitting:!0});var e=null;C.get("/authentication/token/new").then(function(e){return C.post("/authentication/token/validate_with_login",{body:{username:a.state.username,password:a.state.password,request_token:e.request_token}})}).then(function(e){return C.post("/authentication/session/new",{body:{request_token:e.request_token}})}).then(function(t){return e=t.session_id,C.get("/account",{params:{session_id:t.session_id}})}).then(function(t){a.setState({submitting:!1},function(){a.props.updateAuth({user:t,session_id:e})})}).catch(function(e){a.setState({submitting:!1,errors:{base:e.status_message}})})},a.onLogin=function(e){e.preventDefault();var t=a.validateFields();Object.keys(t).length>0?a.setState(function(e){return{errors:Object(O.a)({},e.errors,t)}}):a.onSubmit()},a.getClassForInput=function(e){return b()("form-control",{invalid:a.state.errors[e]})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.errors,s=e.submitting;return r.a.createElement("div",{className:"form-login-container"},r.a.createElement("form",{className:"form-login"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal text-center"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u044f"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"),r.a.createElement("input",{type:"text",className:this.getClassForInput("username"),id:"username",placeholder:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447",name:"username",value:t,onChange:this.onChange,onBlur:this.handleBlur}),n.username&&r.a.createElement("div",{className:"invalid-feedback"},n.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:this.getClassForInput("password"),id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:a,onChange:this.onChange}),n.password&&r.a.createElement("div",{className:"invalid-feedback"},n.password)),r.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",onClick:this.onLogin,disabled:s},"\u0412\u0445\u0456\u0434"),n.base&&r.a.createElement("div",{className:"invalid-feedback text-center"},n.base)))}}]),t}(r.a.Component)),J=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).toggleModal=function(){e.setState(function(e){return{showModal:!e.showModal}})},e.state={showModal:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-success",type:"button",onClick:this.toggleModal},"Login"),r.a.createElement(I.a,{isOpen:this.state.showModal,toggle:this.toggleModal},r.a.createElement(U.a,null,r.a.createElement(B,null))))}}]),t}(r.a.Component),T=a(112),G=a(115),K=a(116),H=a(113),z=A(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={dropdownOpen:!1},a.toggleDropdown=function(){a.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},a.handleLogOut=function(){k("".concat(E,"/authentication/session?api_key=").concat(_),{method:"DELETE",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify({session_id:a.props.session_id})}).then(function(){a.props.onLogOut()})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement(T.a,{isOpen:this.state.dropdownOpen,toggle:this.toggleDropdown},r.a.createElement(G.a,{tag:"div",onClick:this.toggleDropdown,"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen},r.a.createElement("img",{width:"40",className:"rounded-circle",src:"https://secure.gravatar.com/avatar/".concat(e.avatar.gravatar.hash,'.jpg?s=64"'),alt:"",onClick:this.toggleDropdown})),r.a.createElement(K.a,{right:!0},r.a.createElement(H.a,{onClick:this.handleLogOut},"\u0412\u0438\u0439\u0442\u0438")))}}]),t}(n.Component)),Q=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{className:"nav-link"},"Home"))),e?r.a.createElement(z,null):r.a.createElement(J,null)))}}]),t}(r.a.Component),R=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChangeFilters=function(t){var a=t.target.value,n=t.target.name;e.setState(function(e){return{filters:Object(O.a)({},e.filters,Object(q.a)({},n,a))}})},e.onChangePagination=function(t){var a=t.page,n=t.total_pages,r=void 0===n?e.state.total_pages:n;e.setState({page:a,total_pages:r})},e.state={filters:{sort_by:"popularity.desc",primary_release_year:"2018",with_genres:[]},page:1,total_pages:""},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.filters,a=e.page,n=e.total_pages;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"card w-100"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",null,"\u0424\u0456\u043b\u044c\u0442\u0440\u0438:"),r.a.createElement(N,{page:a,total_pages:n,filters:t,onChangeFilters:this.onChangeFilters,onChangePagination:this.onChangePagination})))),r.a.createElement("div",{className:"col-8"},r.a.createElement(D,{filters:t,page:a,onChangePagination:this.onChangePagination}))))}}]),t}(r.a.Component),V=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){C.get("/movie/".concat(this.props.match.params.id))}},{key:"render",value:function(){return r.a.createElement("div",null,"MoviePage")}}]),t}(r.a.Component),W=a(62),X=a(14),Y=new W.a,Z=r.a.createContext(),$=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).updateUser=function(t){e.setState({user:t})},e.updateSessionId=function(t){Y.set("session_id",t,{path:"/",maxAge:2592e3}),e.setState({session_id:t})},e.onLogOut=function(){Y.remove("session_id"),e.setState({session_id:null,user:null})},e.state={user:null,session_id:null},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Y.get("session_id");t&&k("".concat(E,"/account?api_key=").concat(_,"&session_id=").concat(t)).then(function(a){e.updateUser(a),e.updateSessionId(t)})}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.session_id;return r.a.createElement(S.a,null,r.a.createElement(Z.Provider,{value:{user:t,session_id:a,updateUser:this.updateUser,updateSessionId:this.updateSessionId,onLogOut:this.onLogOut}},r.a.createElement("div",null,r.a.createElement(Q,{user:t}),r.a.createElement(X.a,{exact:!0,path:"/",component:R}),r.a.createElement(X.a,{path:"/movie/:id",component:V}))))}}]),t}(r.a.Component);a(108),a(109);o.a.render(r.a.createElement($,null),document.getElementById("root"))},64:function(e,t,a){e.exports=a(110)}},[[64,1,2]]]);
//# sourceMappingURL=main.0f8a2ccd.chunk.js.map